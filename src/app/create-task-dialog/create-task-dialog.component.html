<h1 mat-dialog-title>Новая задача</h1>
<div mat-dialog-content>
  <form [formGroup]="createFromGroup">
    <mat-form-field appearance="fill">
      <mat-label>Ведите название задачи</mat-label>
      <input matInput
             placeholder="Не больше 100 символов"
             formControlName="todoFromControl"
             (input)="checkIsFormValid()"
             required>
      <mat-error *ngIf="controls.todoFromControl.invalid">{{GetErrorMessage(controls.todoFromControl)}}</mat-error>
    </mat-form-field>
    <br>
    <mat-form-field appearance="fill">
      <mat-label>Проект</mat-label>
      <mat-select formControlName="categoryFromControl"
                  (selectionChange)="checkIsFormValid()">
        <mat-option *ngFor="let category of categories; trackBy:trackByCategoryId"
                    (change)="checkIsFormValid()"
                    [value]="category.name">
          {{category.name}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="controls.categoryFromControl.invalid">{{GetErrorMessage(controls.categoryFromControl)}}</mat-error>
    </mat-form-field>
    <br>
    <ng-container *ngIf="controls.categoryFromControl.value === newProjectName">
      <div>
        <mat-form-field appearance="fill">
          <mat-label>Ведите название проекта</mat-label>
          <input matInput
                 placeholder="Не больше 300 символов"
                 formControlName="projectFormControl"
                 (input)="checkIsFormValid()"
                 required>
          <mat-error *ngIf="controls.categoryFromControl.valid">{{GetErrorMessage(controls.projectFormControl)}}</mat-error>
        </mat-form-field>
      </div>
    </ng-container>
  </form>
</div>
<div mat-dialog-actions>
  <button mat-flat-button  color="accent"
          (click)="closeDialog()">ОТМЕНА
  </button>
  <button mat-flat-button color="primary"
          [disabled]="isValidForm"
          (click)="onCreateTodo()">ОК
  </button>
</div>
